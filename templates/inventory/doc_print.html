{% load humanize %}
<!doctype html>
<html><head><meta charset="utf-8"><title>{{ doc.number }}</title>
<style>
  @page { size: A4; margin: 18mm; }
  body{font:12px/1.5 -apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Arial;color:#111}
  h1{font-size:22px;margin:0}
  .muted{color:#555}
  table{width:100%;border-collapse:collapse;margin-top:12px}
  th,td{padding:8px;border-bottom:1px solid #ddd;text-align:left}
  th{font-size:11px;text-transform:uppercase;letter-spacing:.06em;color:#444}
  .totals td{border:none}
  .right{text-align:right}
  .box{border:1px solid #ddd;border-radius:6px;padding:10px;margin-top:8px}
</style></head>
<body>
  <table><tr>
    <td><h1>{{ doc.get_doc_type_display }} {{ doc.number }}</h1><div class="muted">Date: {{ doc.created_at|date:"Y-m-d" }}</div></td>
    <td class="right"><div class="muted">Currency</div><div><strong>{{ doc.currency }}</strong></div></td>
  </tr></table>

  <table><tr>
    <td class="box" style="width:58%"><div class="muted">Bill To</div>
      <strong>{{ doc.customer.name }}</strong><br>
      {% if doc.customer.address %}{{ doc.customer.address|linebreaksbr }}<br>{% endif %}
      {% if doc.customer.phone %}{{ doc.customer.phone }}{% endif %}
      {% if doc.customer.email %} Â· {{ doc.customer.email }}{% endif %}
    </td>
    <td></td>
  </tr></table>

  <table>
    <thead><tr><th>Description</th><th class="right">Qty</th><th class="right">Unit</th><th class="right">Total</th></tr></thead>
    <tbody>
      {% for li in doc.lines.all %}
      <tr>
        <td>{{ li.description }}</td>
        <td class="right">{{ li.quantity }}</td>
        <td class="right">{{ li.unit_price|floatformat:2|intcomma }}</td>
        <td class="right">{{ li.line_total|floatformat:2|intcomma }}</td>
      </tr>
      {% endfor %}
      <tr><td colspan="2"></td><td class="right">Subtotal</td><td class="right">{{ doc.subtotal|floatformat:2|intcomma }}</td></tr>
      <tr><td colspan="2"></td><td class="right">Tax</td><td class="right">{{ doc.tax|floatformat:2|intcomma }}</td></tr>
      <tr><td colspan="2"></td><td class="right"><strong>Total</strong></td><td class="right"><strong>{{ doc.total|floatformat:2|intcomma }}</strong></td></tr>
    </tbody>
  </table>

  {% if doc.notes %}<div class="box"><strong>Notes:</strong><br>{{ doc.notes|linebreaksbr }}</div>{% endif %}
  <p class="muted">Generated {{ now|default:doc.created_at|date:"Y-m-d H:i" }}</p>
</body></html>
