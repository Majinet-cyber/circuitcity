<!doctype html>
<html>
<head>
  <meta charset="utf-8">
  <title>Payslip {{ period|date:"Y-m" }}</title>
  <style>
    body { font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif; font-size: 12px; }
    h1 { font-size: 18px; margin: 0 0 6px; }
    .meta { color: #555; margin-bottom: 12px; }
    table { width: 100%; border-collapse: collapse; }
    th, td { border-bottom: 1px solid #eee; padding: 6px 4px; text-align: left; }
    tfoot td { border-top: 2px solid #000; font-weight: bold; }
    .right { text-align: right; }
  </style>
</head>
<body>
  <h1>Payslip</h1>
  <div class="meta">
    <div><strong>Business:</strong> {{ business.name }}</div>
    <div><strong>Agent:</strong> {{ agent.get_full_name|default:agent.username }}</div>
    <div><strong>Period:</strong> {{ period|date:"F Y" }}</div>
    <div><strong>Generated:</strong> {{ generated_at }}</div>
  </div>

  <table>
    <thead><tr><th>Date</th><th>Category</th><th>Description</th><th class="right">Amount</th></tr></thead>
    <tbody>
      {% for r in rows %}
        <tr>
          <td>{{ r.occurs_at|date:"Y-m-d" }}</td>
          <td>{{ r.category|title }}</td>
          <td>{{ r.description|default:"â€”" }}</td>
          <td class="right">{{ r.amount|floatformat:2 }}</td>
        </tr>
      {% empty %}
        <tr><td colspan="4">No entries for this month.</td></tr>
      {% endfor %}
    </tbody>
    <tfoot>
      <tr><td colspan="3">Gross</td><td class="right">{{ gross|floatformat:2 }}</td></tr>
      <tr><td colspan="3">Deductions</td><td class="right">{{ deductions|floatformat:2 }}</td></tr>
      <tr><td colspan="3">Net</td><td class="right">{{ net|floatformat:2 }}</td></tr>
    </tfoot>
  </table>
</body>
</html>
