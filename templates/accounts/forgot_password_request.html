<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>Forgot Password · Circuit City (v1.6)</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <style>
    :root{
      --bg1:#eef5ff;--bg2:#f9fbff;--card:#fff;--muted:#475569;--text:#0f172a;
      --accent:#2563eb;--accent-2:#1d4ed8;--border:#e2e8f0;
      --danger:#b91c1c;--danger-bg:#fee2e2;--danger-bd:#fecaca;
      --info-bg:#e0f2fe;--info-bd:#bae6fd;--info:#0c4a6e;
      --glass-bg:rgba(37,99,235,0.12);--glass-brd:rgba(96,165,250,.55);
      --glass-shadow:0 10px 30px rgba(37,99,235,.22)
    }
    *{box-sizing:border-box} html,body{height:100%}
    body{margin:0;font-family:system-ui,-apple-system,Segoe UI,Inter,Roboto,sans-serif;
         background:linear-gradient(180deg,var(--bg1),var(--bg2));color:var(--text)}
    .wrap{min-height:100%;display:grid;place-items:center;padding:clamp(16px,4vw,32px)}
    .card{width:min(560px,92vw);background:var(--card);border:1px solid var(--border);
          border-radius:16px;padding:24px 22px;box-shadow:0 20px 60px rgba(2,8,23,.08)}
    .brand{display:flex;align-items:center;gap:10px;margin-bottom:6px}
    .brand .dot{width:34px;height:34px;border-radius:9px;background:linear-gradient(135deg,#60a5fa,#3b82f6)}
    h1{font-size:22px;margin:0 0 8px;font-weight:800}
    .muted{color:var(--muted);font-size:13px}

    form{display:grid;gap:14px;margin-top:10px}
    label{font-weight:600;font-size:14px}
    .field{display:flex;align-items:center;gap:8px;background:#f8fafc;border:1px solid var(--border);
           border-radius:12px;padding:2px 2px 2px 12px}
    .field input{flex:1;background:transparent;color:var(--text);border:0;outline:none;padding:12px;font-size:16px}

    .btn{display:inline-flex;align-items:center;justify-content:center;gap:.5rem;width:100%;
         padding:.85rem 1.1rem;font-weight:800;letter-spacing:.02em;border-radius:14px;
         border:1px solid var(--glass-brd);color:#eaf2ff;
         background:radial-gradient(120% 160% at 30% 20%, rgba(255,255,255,.35), transparent 60%),
                    linear-gradient(135deg, rgba(96,165,250,.65), rgba(37,99,235,.55)),
                    var(--glass-bg);
         box-shadow:var(--glass-shadow);backdrop-filter:blur(10px);-webkit-backdrop-filter:blur(10px);
         transition:transform .18s, box-shadow .18s, color .18s;cursor:pointer;margin-top:.5rem}
    .btn:hover{transform:translateY(-1px);color:#fff;box-shadow:0 14px 34px rgba(37,99,235,.32)}
    .btn:disabled{opacity:.6;cursor:not-allowed;box-shadow:0 8px 18px rgba(37,99,235,.18)}

    .link{color:var(--accent);text-decoration:none}.link:hover{text-decoration:underline}
    .alert{background:var(--info-bg);border:1px solid var(--info-bd);color:var(--info);
           padding:10px 12px;border-radius:12px;font-size:14px;margin:8px 0}
    .alert.err{background:var(--danger-bg);border-color:var(--danger-bd);color:var(--danger)}
    .help{font-size:12px;color:var(--muted)}
    .error{font-size:12px;color:var(--danger);margin-top:6px}

    .footer{position:fixed;left:14px;bottom:10px;color:#94a3b8;font-size:12px}
    .footer-r{position:fixed;right:14px;bottom:10px;color:#94a3b8;font-size:12px}
  </style>
</head>
<body>
  <div class="wrap">
    <div class="card" role="dialog" aria-labelledby="title">
      <div class="brand" aria-hidden="true">
        <div class="dot"></div>
        <div>
          <div style="font-weight:800">Circuit City</div>
          <div class="muted">Staff Portal</div>
        </div>
      </div>

      <h1 id="title">Forgot Password</h1>
      <p class="muted">Enter your email or username. If an account exists, we’ll email a 6-digit code.</p>

      {% if messages %}
        {% for m in messages %}
          <div class="alert{% if m.tags and 'error' in m.tags %} err{% endif %}">{{ m }}</div>
        {% endfor %}
      {% endif %}
      {% if form.errors or form.non_field_errors %}
        <div class="alert err">Please check the field and try again.</div>
      {% endif %}

      <form method="post" action="{% url 'accounts:forgot_password_request' %}" novalidate>
        {% csrf_token %}
        <div>
          <label for="id_identifier">Email or Username</label>
          <div class="field">
            <input id="id_identifier" name="identifier" type="text" autocomplete="username email" autofocus
                   value="{{ form.identifier.value|default_if_none:'' }}" required>
          </div>
          {% if form.identifier.errors %}
            <div class="error">{{ form.identifier.errors|striptags }}</div>
          {% endif %}
        </div>

        <button class="btn" id="submitBtn" type="submit">Send reset code</button>
      </form>

      <p class="help" style="margin-top:12px">
        Already have a code? <a class="link" href="{% url 'accounts:forgot_password_reset' %}">Reset here</a> ·
        <a class="link" href="{% url 'accounts:login' %}">Back to sign in</a>
      </p>
      <p class="help" style="margin-top:4px">
        Tip: Codes expire in 5 minutes. Only the newest code will work if you request multiple times.
      </p>
    </div>
  </div>

  <div class="footer">v1.6</div>
  <div class="footer-r">© imajinet 2025</div>

  <script>
    // Prevent accidental double-submits
    (function () {
      const form = document.querySelector('form');
      const submit = document.getElementById('submitBtn');
      if (!form || !submit) return;
      form.addEventListener('submit', () => {
        submit.disabled = true;
        submit.textContent = 'Sending…';
      });
    })();
  </script>
</body>
</html>
