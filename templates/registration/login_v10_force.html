<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>Sign in Â· Circuit City (v11 FIX)</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <style>
    :root{
      --cc-bg:#f6f9ff; --cc-card:#fff; --cc-line:#e5e7eb; --cc-ink:#0f172a; --cc-muted:#64748b;
      --blue:#2563eb;
    }
    *{box-sizing:border-box}
    body{margin:0;background:linear-gradient(180deg,var(--cc-bg),#fff);font-family:system-ui,Segoe UI,Inter,Roboto,Arial,sans-serif;color:var(--cc-ink)}
    .auth-wrap{min-height:100vh;display:grid;place-items:center;padding:clamp(16px,4vw,32px)}
    .auth-card{width:min(520px,92vw);background:var(--cc-card);border:1px solid var(--cc-line);border-radius:16px;padding:28px;box-shadow:0 20px 60px rgba(2,6,23,.06)}
    h1{margin:0 0 .25rem}
    .muted{color:var(--cc-muted);margin:0 0 12px}
    label{display:block;font-size:14px;margin:12px 0 6px}
    input{width:100%;padding:10px 12px;border:1px solid #cbd5e1;border-radius:10px;font-size:14px}
    .err{background:#fef2f2;border:1px solid #fecaca;color:#991b1b;padding:.6rem .8rem;border-radius:10px;margin:0 0 12px}
    a{color:var(--blue);text-decoration:none}
    .cta{margin-top:18px;padding-top:16px;border-top:1px dashed var(--cc-line)}
    .btn{display:inline-block;border:1px solid #cbd5e1;border-radius:12px;padding:.65rem 1rem;font-weight:700;background:#fff}
    button[type="submit"]{display:block;width:100%;margin-top:12px;padding:.8rem 1.1rem;border-radius:12px;border:1px solid #93c5fd;background:#3b82f6;color:#fff;font-weight:800}
  </style>
</head>
<body>
  <div class="auth-wrap">
    <div class="auth-card" role="dialog" aria-labelledby="loginTitle" aria-describedby="loginDesc">
      <h1 id="loginTitle">Circuit City</h1>
      <p id="loginDesc" class="muted">Sign in to continue. <strong style="color:#2563eb">[v11 FIX]</strong></p>

      {% if messages %}
        {% for m in messages %}<div class="err" role="alert" aria-live="assertive">{{ m }}</div>{% endfor %}
      {% endif %}

      <form method="post" action="{% url 'accounts:login' %}" novalidate>
        {% csrf_token %}
        <input type="hidden" name="next" value="{{ next|default:'' }}"/>

        <!-- Identifier (plain input, NO {{ form.identifier }} anywhere) -->
        <label for="id_identifier">Email or Username</label>
        <input id="id_identifier"
               name="identifier"
               type="text"
               required
               autocomplete="username email"
               value="{{ request.POST.identifier|default:'' }}" />

        <!-- Password -->
        <label for="id_password">Password</label>
        <input id="id_password"
               name="password"
               type="password"
               required
               autocomplete="current-password" />

        <button type="submit">Sign in</button>
      </form>

      <p class="muted" style="margin-top:12px">
        <a href="{% url 'accounts:forgot_password_request' %}">Forgot your password?</a>
      </p>

      <div class="cta" aria-label="Create account">
        <p class="muted" style="margin:0 0 10px">New here?</p>
        <a class="btn" href="{% url 'accounts:signup_manager' %}">Create a Manager account</a>
        <small class="muted" style="display:block;margin-top:6px">Managers create the store and can invite agents later.</small>
        <small class="muted" style="display:block;margin-top:4px">Agents: ask your manager for an invite link.</small>
      </div>
    </div>
  </div>
</body>
</html>
